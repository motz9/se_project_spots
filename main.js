!function(){"use strict";var e="";const t={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-button",inactiveButtonClass:"modal__submit-button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error"},r=(e,t,r)=>{const o=e.querySelector("#".concat(t.id,"-error"));t.classList.remove(r.inputErrorClass),o.textContent=""},o=(e,t,r)=>{(e=>e.some((e=>!e.validity.valid)))(e)?n(t,r):(t.disabled=!1,t.classList.remove(r.inactiveButtonClass))},n=(e,t)=>{e.disabled=!0,e.classList.add(t.inactiveButtonClass)},a=(e,t,o)=>{t.forEach((t=>{r(e,t,o)}))};var c=e+"d3610e9c6dce3cb370d8.svg",s=e+"d38272e02bb4f1ab1c37.svg",l=e+"40608da7369d39bc1077.svg";const d=new class{constructor(e){let{baseUrl:t,headers:r}=e;this._baseUrl=t,this._headers=r}getAppInfo(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}getInitialCards(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status))))}getUserInfo(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status))))}editUserInfo(e){let{name:t,about:r}=e;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:r})}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status))))}updateAvatar(e){let{avatar:t}=e;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status))))}deleteCard(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status))))}addNewCard(e){let{name:t,link:r}=e;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:r})}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status))))}handleLike(e,t){return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:t?"DELETE":"PUT",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status))))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"4d9c0213-ee82-4209-9e72-4d7217385aae","Content-Type":"application/json"}});d.getAppInfo().then((e=>{let[t,r]=e;t.forEach((e=>{G(e,"append")})),document.querySelector(".profile__name").textContent=r.name,document.querySelector(".profile__description").textContent=r.about,document.querySelector(".profile__avatar").src=r.avatar})).catch(console.error);let i=null;const u=document.querySelector(".profile__edit-button"),m=document.querySelector(".profile__new-post-button"),_=document.querySelector(".profile__avatar-button"),h=document.querySelector(".profile__name"),v=document.querySelector(".profile__description"),y=document.querySelector("#edit-modal"),f=y.querySelector(".modal__form"),S=y.querySelector(".modal__submit-button"),p=y.querySelector("#profile-name-input"),b=y.querySelector("#profile-description-input"),q=document.querySelector("#add-card-modal"),E=q.querySelector(".modal__form"),k=q.querySelector(".modal__submit-button"),C=q.querySelector("#add-card-link-input"),L=q.querySelector("#add-card-name-input"),g=document.querySelector("#preview-modal"),x=g.querySelector(".modal__image"),j=g.querySelector(".modal__caption"),U=document.querySelector("#card-template"),P=document.querySelector(".cards__list"),w=document.querySelector("#avatar-modal"),A=w.querySelector(".modal__form"),I=w.querySelector(".modal__submit-button"),D=w.querySelector("#profile-avatar-input"),T=document.querySelector(".profile__avatar"),N=document.querySelector("#delete-modal"),B=N.querySelector(".modal__form"),O=N.querySelector(".modal__submit-button"),J=N.querySelector(".modal__cancel-button");function H(e){e.target.classList.contains("modal_is-opened")&&M(e.target)}function z(e){document.addEventListener("keydown",F),e.addEventListener("mousedown",H),e.classList.add("modal_is-opened")}function M(e){e.removeEventListener("mousedown",H),document.removeEventListener("keydown",F),e.classList.remove("modal_is-opened")}function F(e){if("Escape"===e.key){const e=document.querySelector(".modal_is-opened");e&&M(e)}}function G(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"append";const r=function(e){const t=U.content.querySelector(".card").cloneNode(!0);t.dataset.cardId=e._id;const r=t.querySelector(".card__title"),o=t.querySelector(".card__image"),n=t.querySelector(".card__like-button"),a=t.querySelector(".card__delete-button");return r.textContent=e.name,o.src=e.link,o.alt=e.name,e.isLiked&&n.classList.add("card__like-button_liked"),n.addEventListener("click",(()=>{const t=n.classList.contains("card__like-button_liked");d.handleLike(e._id,t).then((()=>{n.classList.toggle("card__like-button_liked")})).catch(console.error)})),o.addEventListener("click",(()=>{z(g),x.src=e.link,j.textContent=e.name,x.alt=e.name})),a.addEventListener("click",(()=>{i=e._id,z(N)})),t}(e);P[t](r)}var K;B.addEventListener("submit",(e=>{e.preventDefault();const t=document.querySelector('[data-card-id = "'.concat(i,'"]'));O.textContent="Deleting...",d.deleteCard(i).then((()=>{t.remove(),M(N)})).catch(console.error).finally((()=>{O.textContent="Delete"}))})),J.addEventListener("click",(()=>{M(N)})),document.querySelector(".header__logo").src=c,document.querySelector(".profile__edit-button img").src=s,document.querySelector(".profile__new-post-button img").src=l,u.addEventListener("click",(()=>{p.value=h.textContent,b.value=v.textContent,a(f,[p,b],t),z(y)})),m.addEventListener("click",(()=>{z(q)})),_.addEventListener("click",(()=>{a(A,[D],t),z(w)})),A.addEventListener("submit",(function(e){e.preventDefault(),I.textContent="Saving...",d.updateAvatar({avatar:D.value}).then((e=>{T.src=e.avatar,M(w)})).catch(console.error).finally((()=>{I.textContent="Save",A.reset()}))})),f.addEventListener("submit",(function(e){e.preventDefault(),S.textContent="Saving...",d.editUserInfo({name:p.value,about:b.value}).then((e=>{h.textContent=e.name,v.textContent=e.about,M(y)})).catch(console.error).finally((()=>{S.textContent="Save"}))})),E.addEventListener("submit",(function(e){e.preventDefault();const r={name:L.value,link:C.value};k.textContent="Saving...",d.addNewCard(r).then((r=>{G(r),e.target.reset(),n(k,t),M(q)})).catch(console.error).finally((()=>{k.textContent="Save"}))})),document.querySelectorAll(".modal__close-button").forEach((e=>{const t=e.closest(".modal");e.addEventListener("click",(()=>M(t)))})),K=t,document.querySelectorAll(K.formSelector).forEach((e=>{((e,t)=>{const n=Array.from(e.querySelectorAll(t.inputSelector)),a=e.querySelector(t.submitButtonSelector);o(n,a,t),n.forEach((c=>{c.addEventListener("input",(function(){((e,t,o)=>{t.validity.valid?r(e,t,o):((e,t,r,o)=>{const n=e.querySelector("#".concat(t.id,"-error"));t.classList.add(o.inputErrorClass),n.textContent=r})(e,t,t.validationMessage,o)})(e,c,t),o(n,a,t)}))}))})(e,K)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUgsRUFBV0UsSUFBTyxJRDVENUJxQixFQ21MaEJ4SSxFRGxMRTBFLFNBQVN5RSxpQkFBaUJYLEVBQU92SSxjQUN6QzRCLFNBQVNyQixJQXBCTThJLEVBQUM5SSxFQUFhRSxLQUN0QyxNQUFNUyxFQUFZb0ksTUFBTUMsS0FDdEJoSixFQUFZMkksaUJBQWlCekksRUFBU1IsZ0JBRWxDa0IsRUFBZ0JaLEVBQVlJLGNBQ2hDRixFQUFTUCxzQkFHWGUsRUFBa0JDLEVBQVdDLEVBQWVWLEdBRTVDUyxFQUFVVSxTQUFTcEIsSUFDakJBLEVBQWEyRyxpQkFBaUIsU0FBUyxXQWxEaEJxQyxFQUFDakosRUFBYUMsRUFBY0MsS0FDaERELEVBQWFhLFNBQVNDLE1BUXpCaEIsRUFBZUMsRUFBYUMsRUFBY0MsR0F6QnZCZ0osRUFBQ2xKLEVBQWFDLEVBQWNrSixFQUFjakosS0FDL0QsTUFBTUMsRUFBc0JILEVBQVlJLGNBQWMsSUFBREMsT0FDL0NKLEVBQWFLLEdBQUUsV0FFckJMLEVBQWFNLFVBQVVZLElBQUlqQixFQUFTTCxpQkFDcENNLEVBQW9CTSxZQUFjMEksQ0FBWSxFQWE1Q0QsQ0FDRWxKLEVBQ0FDLEVBQ0FBLEVBQWFtSixrQkFDYmxKLEVBSUosRUF5Q0krSSxDQUFtQmpKLEVBQWFDLEVBQWNDLEdBQzlDUSxFQUFrQkMsRUFBV0MsRUFBZVYsRUFDOUMsR0FBRSxHQUNGLEVBTUE0SSxDQUFrQjlJLEVBQWFnSSxFQUFPLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9zY3JpcHRzL3ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3V0aWxzL0FwaS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCIgZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zdWJtaXQtYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvclwiLFxufTtcblxuY29uc3Qgc2hvd0lucHV0RXJyb3IgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlLCBzZXR0aW5ncykgPT4ge1xuICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgKTtcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcbiAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbn07XG5cbmNvbnN0IGhpZGVJbnB1dEVycm9yID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIHNldHRpbmdzKSA9PiB7XG4gIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICApO1xuICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xuICBlcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbn07XG5cbmNvbnN0IGNoZWNrSW5wdXRWYWxpZGl0eSA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBzZXR0aW5ncykgPT4ge1xuICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgIHNob3dJbnB1dEVycm9yKFxuICAgICAgZm9ybUVsZW1lbnQsXG4gICAgICBpbnB1dEVsZW1lbnQsXG4gICAgICBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UsXG4gICAgICBzZXR0aW5nc1xuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgc2V0dGluZ3MpO1xuICB9XG59O1xuXG5jb25zdCBoYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0KSA9PiB7XG4gIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gIH0pO1xufTtcblxuY29uc3QgdG9nZ2xlQnV0dG9uU3RhdGUgPSAoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBzZXR0aW5ncykgPT4ge1xuICBpZiAoaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcbiAgICBkaXNhYmxlQnV0dG9uKGJ1dHRvbkVsZW1lbnQsIHNldHRpbmdzKTtcbiAgfSBlbHNlIHtcbiAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZGlzYWJsZUJ1dHRvbiA9IChidXR0b25FbGVtZW50LCBzZXR0aW5ncykgPT4ge1xuICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xufTtcblxuIGV4cG9ydCBjb25zdCByZXNldFZhbGlkYXRpb24gPSAoZm9ybUVsZW1lbnQsIGlucHV0TGlzdCwgc2V0dGluZ3MpID0+IHtcbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0LCBzZXR0aW5ncyk7XG4gIH0pO1xufTtcblxuY29uc3Qgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoZm9ybUVsZW1lbnQsIHNldHRpbmdzKSA9PiB7XG4gIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChzZXR0aW5ncy5pbnB1dFNlbGVjdG9yKVxuICApO1xuICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvclxuICApO1xuXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgc2V0dGluZ3MpO1xuXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBzZXR0aW5ncyk7XG4gICAgICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIHNldHRpbmdzKTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcbiAgY29uc3QgZm9ybUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpO1xuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICAgIHNldEV2ZW50TGlzdGVuZXJzKGZvcm1FbGVtZW50LCBjb25maWcpO1xuICB9KTtcbn07XG5cbiIsImltcG9ydCB7IGVuYWJsZVZhbGlkYXRpb24sIHZhbGlkYXRpb25Db25maWcsIHJlc2V0VmFsaWRhdGlvbiwgZGlzYWJsZUJ1dHRvbiB9IGZyb20gXCIuLi9zY3JpcHRzL3ZhbGlkYXRpb24uanNcIjtcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQgbG9nb1BhdGggZnJvbSBcIi4uL2ltYWdlcy9sb2dvLnN2Z1wiO1xuaW1wb3J0IHBlbmNpbFBhdGggZnJvbSBcIi4uL2ltYWdlcy9wZW5jaWwuc3ZnXCI7XG5pbXBvcnQgcGx1c1BhdGggZnJvbSBcIi4uL2ltYWdlcy9wbHVzLnN2Z1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vdXRpbHMvQXBpLmpzXCI7XG5cblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiNGQ5YzAyMTMtZWU4Mi00MjA5LTllNzItNGQ3MjE3Mzg1YWFlXCIsXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgfVxufSk7XG5cbmFwaS5nZXRBcHBJbmZvKClcbiAgICAudGhlbigoWyBjYXJkcywgdXNlckluZm8gXSkgPT4ge1xuICAgICAgY2FyZHMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICByZW5kZXJDYXJkKGl0ZW0sIFwiYXBwZW5kXCIpO1xuICAgICAgfSk7XG5cbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19uYW1lJykudGV4dENvbnRlbnQgPSB1c2VySW5mby5uYW1lO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2Rlc2NyaXB0aW9uJykudGV4dENvbnRlbnQgPSB1c2VySW5mby5hYm91dDtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXInKS5zcmMgPSB1c2VySW5mby5hdmF0YXI7XG4gICAgfSlcbiAgICAuY2F0Y2goY29uc29sZS5lcnJvcik7XG5cblxuXG5sZXQgY2FyZElkVG9EZWxldGUgPSBudWxsO1xuXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XG5jb25zdCBjYXJkTW9kYWxCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25ldy1wb3N0LWJ1dHRvblwiKTtcbmNvbnN0IGF2YXRhck1vZGFsQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXItYnV0dG9uXCIpO1xuY29uc3QgcHJvZmlsZU5hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCJcbik7XG5cbmNvbnN0IGVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1tb2RhbFwiKTtcbmNvbnN0IGVkaXRGb3JtRWxlbWVudCA9IGVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuY29uc3QgZWRpdE1vZGFsU3VibWl0QnV0dG9uID0gZWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3N1Ym1pdC1idXR0b25cIik7XG5jb25zdCBlZGl0TW9kYWxOYW1lSW5wdXQgPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLW5hbWUtaW5wdXRcIik7XG5jb25zdCBlZGl0TW9kYWxEZXNjcmlwdGlvbklucHV0ID0gZWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIlxuKTtcblxuY29uc3QgY2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1tb2RhbFwiKTtcbmNvbnN0IGNhcmRNb2RhbEZvcm1FbGVtZW50ID0gY2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5jb25zdCBjYXJkTW9kYWxTdWJtaXRCdXR0b24gPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiKTtcbmNvbnN0IGNhcmRNb2RhbExpbmtJbnB1dCA9IGNhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLWxpbmstaW5wdXRcIik7XG5jb25zdCBjYXJkTW9kYWxOYW1lSW5wdXQgPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1uYW1lLWlucHV0XCIpO1xuXG5jb25zdCBwcmV2aWV3TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctbW9kYWxcIik7XG5jb25zdCBwcmV2aWV3TW9kYWxJbWFnZUVsZW1lbnQgPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG5jb25zdCBwcmV2aWV3TW9kYWxDYXB0aW9uRWxlbWVudCA9XG4gIHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xuXG5cbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKTtcbmNvbnN0IGNhcmRzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XG5cbmNvbnN0IGF2YXRhck1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhdmF0YXItbW9kYWxcIik7XG5jb25zdCBhdmF0YXJNb2RhbEZvcm1FbGVtZW50ID0gYXZhdGFyTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IGF2YXRhck1vZGFsU3VibWl0QnV0dG9uID0gYXZhdGFyTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiKTtcbmNvbnN0IGF2YXRhck1vZGFsTGlua0lucHV0ID0gYXZhdGFyTW9kYWwucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWF2YXRhci1pbnB1dFwiKTtcbmNvbnN0IGF2YXRhckltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIik7XG5cbmNvbnN0IGRlbGV0ZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZWxldGUtbW9kYWxcIik7XG5jb25zdCBkZWxldGVNb2RhbEZvcm0gPSBkZWxldGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuY29uc3QgZGVsZXRlTW9kYWxTdWJtaXRCdXR0b24gPSBkZWxldGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zdWJtaXQtYnV0dG9uXCIpO1xuY29uc3QgZGVsZXRlTW9kYWxDYW5jZWxCdXR0b24gPSBkZWxldGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYW5jZWwtYnV0dG9uXCIpO1xuXG5kZWxldGVNb2RhbEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCBjYXJkVG9EZWxldGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1jYXJkLWlkID0gXCIke2NhcmRJZFRvRGVsZXRlfVwiXWApO1xuICBkZWxldGVNb2RhbFN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiRGVsZXRpbmcuLi5cIjtcbiAgYXBpLmRlbGV0ZUNhcmQoY2FyZElkVG9EZWxldGUpXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgY2FyZFRvRGVsZXRlLnJlbW92ZSgpO1xuICAgICAgY2xvc2VNb2RhbChkZWxldGVNb2RhbCk7XG4gICAgfSlcbiAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBkZWxldGVNb2RhbFN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiRGVsZXRlXCI7XG4gICAgfSlcbn0pO1xuXG5kZWxldGVNb2RhbENhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjbG9zZU1vZGFsKGRlbGV0ZU1vZGFsKTtcbn0pO1xuXG5mdW5jdGlvbiBnZXRDYXJkRWxlbWVudChkYXRhKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZFRlbXBsYXRlLmNvbnRlbnRcbiAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICBjYXJkRWxlbWVudC5kYXRhc2V0LmNhcmRJZCA9IGRhdGEuX2lkO1xuXG4gIGNvbnN0IGNhcmROYW1lRWxlbWVudCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XG4gIGNvbnN0IGNhcmRJbWFnZUVsZW1lbnQgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICBjb25zdCBjYXJkTGlrZUJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gIGNvbnN0IGNhcmREZWxldGVCdXR0b24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XG5cbiAgY2FyZE5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICBjYXJkSW1hZ2VFbGVtZW50LnNyYyA9IGRhdGEubGluaztcbiAgY2FyZEltYWdlRWxlbWVudC5hbHQgPSBkYXRhLm5hbWU7XG5cbiAgaWYgKGRhdGEuaXNMaWtlZCkge1xuICAgIGNhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ1dHRvbl9saWtlZFwiKTtcbiAgfVxuXG4gIGNhcmRMaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY29uc3QgaXNMaWtlZCA9IGNhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucyhcImNhcmRfX2xpa2UtYnV0dG9uX2xpa2VkXCIpO1xuICAgIGFwaS5oYW5kbGVMaWtlKGRhdGEuX2lkLCBpc0xpa2VkKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBjYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fbGlrZWRcIik7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xufSk7XG5cbiAgY2FyZEltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIG9wZW5Nb2RhbChwcmV2aWV3TW9kYWwpO1xuICAgIHByZXZpZXdNb2RhbEltYWdlRWxlbWVudC5zcmMgPSBkYXRhLmxpbms7XG4gICAgcHJldmlld01vZGFsQ2FwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgcHJldmlld01vZGFsSW1hZ2VFbGVtZW50LmFsdCA9IGRhdGEubmFtZTtcbiAgfSk7XG5cbiAgY2FyZERlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNhcmRJZFRvRGVsZXRlPSBkYXRhLl9pZDtcbiAgICBvcGVuTW9kYWwoZGVsZXRlTW9kYWwpO1xuICB9KTtcblxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIHNldHVwQ2xvc2VCdXR0b25MaXN0ZW5lcnMoKSB7XG4gIGNvbnN0IGNsb3NlQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiKTtcblxuICBjbG9zZUJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgY29uc3QgbW9kYWwgPSBidXR0b24uY2xvc2VzdChcIi5tb2RhbFwiKTtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGNsb3NlTW9kYWwobW9kYWwpKTtcbiAgfSk7XG59XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2xvZ28nKS5zcmMgPSBsb2dvUGF0aDtcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbiBpbWcnKS5zcmMgPSBwZW5jaWxQYXRoO1xuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX25ldy1wb3N0LWJ1dHRvbiBpbWcnKS5zcmMgPSBwbHVzUGF0aDtcblxuZnVuY3Rpb24gaGFuZGxlT3ZlcmxheShldnQpIHtcbiAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfaXMtb3BlbmVkXCIpKSB7XG4gICAgY2xvc2VNb2RhbChldnQudGFyZ2V0KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBvcGVuTW9kYWwobW9kYWwpIHtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjKTtcbiAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBoYW5kbGVPdmVybGF5KTtcbiAgbW9kYWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX2lzLW9wZW5lZFwiKTtcbn1cblxuZnVuY3Rpb24gY2xvc2VNb2RhbChtb2RhbCkge1xuICBtb2RhbC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGhhbmRsZU92ZXJsYXkpO1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFc2MpO1xuICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfaXMtb3BlbmVkXCIpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVFc2MoZXZ0KSB7XG4gIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgY29uc3Qgb3Blbk1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9pcy1vcGVuZWRcIik7XG4gICAgaWYgKG9wZW5Nb2RhbCkge1xuICAgICAgY2xvc2VNb2RhbChvcGVuTW9kYWwpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVFZGl0Rm9ybVN1Ym1pdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIGVkaXRNb2RhbFN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XG4gIGFwaS5lZGl0VXNlckluZm8oeyBuYW1lOiBlZGl0TW9kYWxOYW1lSW5wdXQudmFsdWUsIGFib3V0OiBlZGl0TW9kYWxEZXNjcmlwdGlvbklucHV0LnZhbHVlIH0pXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIHByb2ZpbGVOYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgICAgIHByb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBkYXRhLmFib3V0O1xuICAgICAgY2xvc2VNb2RhbChlZGl0TW9kYWwpO1xuICAgIH0pXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgZWRpdE1vZGFsU3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZlXCI7XG4gICAgfSlcbn1cblxuZnVuY3Rpb24gcmVuZGVyQ2FyZChpdGVtLCBtZXRob2QgPSBcImFwcGVuZFwiKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZEVsZW1lbnQoaXRlbSk7XG4gIGNhcmRzTGlzdFttZXRob2RdKGNhcmRFbGVtZW50KTtcbn1cbmZ1bmN0aW9uIGhhbmRsZUNhcmRNb2RhbEZvcm1TdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCBpbnB1dFZhbHVlcyA9IHtcbiAgICBuYW1lOiBjYXJkTW9kYWxOYW1lSW5wdXQudmFsdWUsXG4gICAgbGluazogY2FyZE1vZGFsTGlua0lucHV0LnZhbHVlLFxuICB9O1xuXG4gIGNhcmRNb2RhbFN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XG4gIGFwaS5hZGROZXdDYXJkKGlucHV0VmFsdWVzKVxuICAgIC50aGVuKChuZXdDYXJkKSA9PiB7XG4gICAgICByZW5kZXJDYXJkKG5ld0NhcmQpO1xuICAgICAgZXZ0LnRhcmdldC5yZXNldCgpO1xuICAgICAgZGlzYWJsZUJ1dHRvbihjYXJkTW9kYWxTdWJtaXRCdXR0b24sIHZhbGlkYXRpb25Db25maWcpO1xuICAgICAgY2xvc2VNb2RhbChjYXJkTW9kYWwpO1xuICAgIH0pXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgY2FyZE1vZGFsU3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZlXCI7XG4gICAgfSlcbn1cblxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZWRpdE1vZGFsTmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZU5hbWVFbGVtZW50LnRleHRDb250ZW50O1xuICBlZGl0TW9kYWxEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gcHJvZmlsZURlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudDtcbiAgcmVzZXRWYWxpZGF0aW9uKFxuICAgIGVkaXRGb3JtRWxlbWVudCxcbiAgICBbZWRpdE1vZGFsTmFtZUlucHV0LCBlZGl0TW9kYWxEZXNjcmlwdGlvbklucHV0XSxcbiAgICB2YWxpZGF0aW9uQ29uZmlnXG4gICk7XG4gIG9wZW5Nb2RhbChlZGl0TW9kYWwpO1xufSk7XG5cbmNhcmRNb2RhbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBvcGVuTW9kYWwoY2FyZE1vZGFsKTtcbn0pO1xuXG5hdmF0YXJNb2RhbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICByZXNldFZhbGlkYXRpb24oXG4gICAgYXZhdGFyTW9kYWxGb3JtRWxlbWVudCxcbiAgICBbYXZhdGFyTW9kYWxMaW5rSW5wdXRdLFxuICAgIHZhbGlkYXRpb25Db25maWdcbiAgKTtcbiAgb3Blbk1vZGFsKGF2YXRhck1vZGFsKTtcbn0pO1xuXG5mdW5jdGlvbiBoYW5kbGVBdmF0YXJGb3JtU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgYXZhdGFyTW9kYWxTdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xuICBhcGkudXBkYXRlQXZhdGFyKHsgYXZhdGFyOiBhdmF0YXJNb2RhbExpbmtJbnB1dC52YWx1ZSB9KVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBhdmF0YXJJbWFnZS5zcmMgPSBkYXRhLmF2YXRhcjtcbiAgICAgIGNsb3NlTW9kYWwoYXZhdGFyTW9kYWwpO1xuICAgIH0pXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgYXZhdGFyTW9kYWxTdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcbiAgICAgIGF2YXRhck1vZGFsRm9ybUVsZW1lbnQucmVzZXQoKTtcbiAgICB9KVxufVxuXG5hdmF0YXJNb2RhbEZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlQXZhdGFyRm9ybVN1Ym1pdCk7XG5lZGl0Rm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVFZGl0Rm9ybVN1Ym1pdCk7XG5jYXJkTW9kYWxGb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUNhcmRNb2RhbEZvcm1TdWJtaXQpO1xuXG5zZXR1cENsb3NlQnV0dG9uTGlzdGVuZXJzKCk7XG5lbmFibGVWYWxpZGF0aW9uKHZhbGlkYXRpb25Db25maWcpO1xuIiwiY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4gIGdldEFwcEluZm8oKSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldEluaXRpYWxDYXJkcygpLCB0aGlzLmdldFVzZXJJbmZvKCldKVxuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgZWRpdFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgYWJvdXQsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICB1cGRhdGVBdmF0YXIoeyBhdmF0YXIgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGF2YXRhcixcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkTmV3Q2FyZCh7IG5hbWUsIGxpbmt9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGxpbmssXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICBoYW5kbGVMaWtlKGNhcmRJZCwgaXNMaWtlZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IGlzTGlrZWQgPyBcIkRFTEVURVwiIDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEFwaTtcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiaGlkZUlucHV0RXJyb3IiLCJmb3JtRWxlbWVudCIsImlucHV0RWxlbWVudCIsInNldHRpbmdzIiwiZXJyb3JNZXNzYWdlRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb25jYXQiLCJpZCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInRleHRDb250ZW50IiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJpbnB1dExpc3QiLCJidXR0b25FbGVtZW50Iiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJoYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlQnV0dG9uIiwiZGlzYWJsZWQiLCJhZGQiLCJyZXNldFZhbGlkYXRpb24iLCJmb3JFYWNoIiwiaW5wdXQiLCJhcGkiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJiYXNlVXJsIiwiaGVhZGVycyIsInRoaXMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiZ2V0QXBwSW5mbyIsIlByb21pc2UiLCJhbGwiLCJnZXRJbml0aWFsQ2FyZHMiLCJnZXRVc2VySW5mbyIsImZldGNoIiwidGhlbiIsInJlcyIsIm9rIiwianNvbiIsInJlamVjdCIsInN0YXR1cyIsImVkaXRVc2VySW5mbyIsIl9yZWYyIiwibmFtZSIsImFib3V0IiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ1cGRhdGVBdmF0YXIiLCJfcmVmMyIsImF2YXRhciIsImRlbGV0ZUNhcmQiLCJjYXJkSWQiLCJhZGROZXdDYXJkIiwiX3JlZjQiLCJsaW5rIiwiaGFuZGxlTGlrZSIsImlzTGlrZWQiLCJhdXRob3JpemF0aW9uIiwiY2FyZHMiLCJ1c2VySW5mbyIsIml0ZW0iLCJyZW5kZXJDYXJkIiwiZG9jdW1lbnQiLCJzcmMiLCJjYXRjaCIsImNvbnNvbGUiLCJlcnJvciIsImNhcmRJZFRvRGVsZXRlIiwicHJvZmlsZUVkaXRCdXR0b24iLCJjYXJkTW9kYWxCdXR0b24iLCJhdmF0YXJNb2RhbEJ1dHRvbiIsInByb2ZpbGVOYW1lRWxlbWVudCIsInByb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQiLCJlZGl0TW9kYWwiLCJlZGl0Rm9ybUVsZW1lbnQiLCJlZGl0TW9kYWxTdWJtaXRCdXR0b24iLCJlZGl0TW9kYWxOYW1lSW5wdXQiLCJlZGl0TW9kYWxEZXNjcmlwdGlvbklucHV0IiwiY2FyZE1vZGFsIiwiY2FyZE1vZGFsRm9ybUVsZW1lbnQiLCJjYXJkTW9kYWxTdWJtaXRCdXR0b24iLCJjYXJkTW9kYWxMaW5rSW5wdXQiLCJjYXJkTW9kYWxOYW1lSW5wdXQiLCJwcmV2aWV3TW9kYWwiLCJwcmV2aWV3TW9kYWxJbWFnZUVsZW1lbnQiLCJwcmV2aWV3TW9kYWxDYXB0aW9uRWxlbWVudCIsImNhcmRUZW1wbGF0ZSIsImNhcmRzTGlzdCIsImF2YXRhck1vZGFsIiwiYXZhdGFyTW9kYWxGb3JtRWxlbWVudCIsImF2YXRhck1vZGFsU3VibWl0QnV0dG9uIiwiYXZhdGFyTW9kYWxMaW5rSW5wdXQiLCJhdmF0YXJJbWFnZSIsImRlbGV0ZU1vZGFsIiwiZGVsZXRlTW9kYWxGb3JtIiwiZGVsZXRlTW9kYWxTdWJtaXRCdXR0b24iLCJkZWxldGVNb2RhbENhbmNlbEJ1dHRvbiIsImhhbmRsZU92ZXJsYXkiLCJldnQiLCJ0YXJnZXQiLCJjb250YWlucyIsImNsb3NlTW9kYWwiLCJvcGVuTW9kYWwiLCJtb2RhbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJoYW5kbGVFc2MiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiY2FyZEVsZW1lbnQiLCJkYXRhIiwiY29udGVudCIsImNsb25lTm9kZSIsImRhdGFzZXQiLCJfaWQiLCJjYXJkTmFtZUVsZW1lbnQiLCJjYXJkSW1hZ2VFbGVtZW50IiwiY2FyZExpa2VCdXR0b24iLCJjYXJkRGVsZXRlQnV0dG9uIiwiYWx0IiwidG9nZ2xlIiwiZ2V0Q2FyZEVsZW1lbnQiLCJjb25maWciLCJwcmV2ZW50RGVmYXVsdCIsImNhcmRUb0RlbGV0ZSIsImZpbmFsbHkiLCJsb2dvUGF0aCIsInBlbmNpbFBhdGgiLCJwbHVzUGF0aCIsInZhbHVlIiwicmVzZXQiLCJpbnB1dFZhbHVlcyIsIm5ld0NhcmQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYnV0dG9uIiwiY2xvc2VzdCIsInNldEV2ZW50TGlzdGVuZXJzIiwiQXJyYXkiLCJmcm9tIiwiY2hlY2tJbnB1dFZhbGlkaXR5Iiwic2hvd0lucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJ2YWxpZGF0aW9uTWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=